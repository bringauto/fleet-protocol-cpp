CMAKE_MINIMUM_REQUIRED(VERSION 3.25 FATAL_ERROR)
PROJECT(fleet-protocol C CXX)

SET(CMAKE_CXX_STANDARD 20)

INCLUDE_DIRECTORIES(${CMAKE_CURRENT_LIST_DIR}/../)
ENABLE_TESTING()
FIND_PACKAGE(GTest REQUIRED)
INCLUDE_DIRECTORIES(${GTEST_INCLUDE_DIRS})
FILE(GLOB_RECURSE source_test_files "${CMAKE_CURRENT_LIST_DIR}/src/*")
ADD_EXECUTABLE(fleet_protocol_tests ${source_test_files} ${CMAKE_CURRENT_LIST_DIR}/main.cpp)
#IF(NOT ${MODULE_MAINTAINER_TARGET_NAME})
#  MESSAGE(FATAL_ERROR "${MODULE_MAINTAINER_TARGET_NAME} not found")
#ENDIF()
TARGET_LINK_LIBRARIES(fleet_protocol_tests PUBLIC ${GTEST_LIBRARIES}) #${MODULE_MAINTAINER_TARGET_NAME})
INCLUDE(GoogleTest)
GTEST_DISCOVER_TESTS(fleet_protocol_tests)